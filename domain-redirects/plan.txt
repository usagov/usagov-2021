Need to configure domains, routes, and external service domains for each additional domain:

  # Domains are org-wide. We already have usa.gov mapped. 
  cf create-domain gsa-tts-usagov consumeraction.gov

  # Create and map a route
  cf create-route consumeraction.gov
  cf map-route cms consumeraction.gov
  cf map-route cms consumeraction.gov --hostname www

  # Bind URLS to waf's route service:
  # NOTE: dev example. See also deploy-waf, which binds just the usa.gov subdomains. We can bind multiple
  #       domains to a single route service. 
  # cf bind-route-service consumeraction.gov waf-route-dev-usagov
  # cf bind-route-service www.consumeraction.gov waf-route-dev-usagov
  
  
  # Can specify multiple services on one external domain.
  # NOTE: if we can supply all, it makes sense to use the option of
  # passing a filename.json to the -c option 
  cf create-service external-domain domain domain-redirects-domain -c '{"domains": ["consumeraction.gov", "www.consumeraction.gov"]}'



  # Run this to verify:
  cf service domain-redirects-domain


  ### To update the external domain service:
  cf update-service domain-redirects-domain -c '{"domains": ["www.consumeraction.gov", "consumeraction.gov"]}'



QUESTIONS:

1) How can I validate that the certs are in place and set up
   correctly, prior to switchover?  I have tried setting
   consumeraction.gov to the same IP address as cms-dev.usa.gov in my
   /etc/hosts file and making requests, but the cert is not
   found. With ALB in the mix, this probably isn't what I want.

2) According to the docs
   (https://cloud.gov/docs/services/external-domain-service/), I can
   specify multiple domains on one external domain service. Does it
   make sense do do that only for domains and subdomains, or would it
   be valid to put a whole raft of domains on one external domain
   service? Is there any interaction between these and certificates?


