#!/bin/bash

usage="
$0: Change space in cloud.gov.

Usage:
   $0 -h
   $0 SPACE

Options:
-h:          show help and exit
SPACE:       space to switch to
"

PREAMBLE=$(sed -E 's/bin\/.*\/includes/bin\/includes/g' <<< "$( cd -- "$(dirname "$0")" >/dev/null 2>&1 ; pwd -P )/includes/preamble.sh")
if [ -f "$PREAMBLE" ]; then
  # shellcheck source=bin/includes/preamble.sh
  . "$PREAMBLE"
else
   echo Cannot find preamble at "$PREAMBLE"
   exit 1
fi

CLOUDDIR=$(dirname "$0")

. $CLOUDDIR/../../env.local;

SPACE=$1

if [ "$SPACE" = "dev" ]; then
    echo cf target -o $CF_DEV_ORG -s $CF_DEV_SPACE
    cf target -o $CF_DEV_ORG -s $CF_DEV_SPACE

elif [ "$SPACE" = "stage" ]; then
    echo cf target -o $CF_STAGE_ORG -s $CF_STAGE_SPACE
    cf target -o $CF_STAGE_ORG -s $CF_STAGE_SPACE

elif [ "$SPACE" = "prod" ]; then
    echo cf target -o $CF_PROD_ORG -s $CF_PROD_SPACE
    cf target -o $CF_PROD_ORG -s $CF_PROD_SPACE

elif [ "$SPACE" = "tools" ]; then
    echo cf target -o $CF_TOOLS_ORG -s $CF_TOOLS_SPACE
    cf target -o $CF_TOOLS_ORG -s $CF_TOOLS_SPACE

elif [ "$SPACE" = "personal" ]; then
    echo cf target -o $CF_PERSONAL_ORG -s $CF_PERSONAL_SPACE
    cf target -o $CF_PERSONAL_ORG -s $CF_PERSONAL_SPACE

elif [ "$SPACE" = "shared-egress" ] || [ "$SPACE" = "egress" ]; then
    echo cf target -o $CF_EGRESS_ORG -s $CF_EGRESS_SPACE
    cf target -o $CF_EGRESS_ORG -s $CF_EGRESS_SPACE

else
    cf target

fi
