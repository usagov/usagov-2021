<?php
use \Drupal\Core\Form\FormStateInterface;
function usa_workflow_form_alter(&$form, FormStateInterface $form_state, $form_id){ 
  $newform = ['node_basic_page_form', 'node_wizard_step_form', 'node_wizard_form'];
  $wfusers = wf_user_role();
  if(in_array($form_id,$newform) || $wfusers['currentUser']['id'] === $wfusers['reviseduser']['id']){
    unset($form['moderation_state']['widget'][0]['state']['#options']['published']);
    if(isset($form['new_state'])) unset($form['new_state']['#options']['published']);
    if(isset($form['actions'])) unset($form['actions']['delete']);
  }
}

function usa_workflow_menu_local_tasks_alter(&$data, $route_name){
  $wfusers = wf_user_role();
  if($wfusers['currentUser']['id'] === $wfusers['reviseduser']['id']){
    unset($data['tabs'][0]['entity.node.delete_form']);
  }
}
function wf_user_role(){
  $return = [];
  // Users and their roles from current node
  $currentUser = \Drupal::currentUser();
  $node = \Drupal::routeMatch()->getParameter('node');
  if($node !== NULL && get_class($node) == 'Drupal\node\Entity\Node'){
    $reviseduser = \Drupal\user\Entity\User::load(\Drupal::routeMatch()->getParameter('node')->getRevisionUserId());
    //current logged in user
    $return['currentUser']['id'] = $currentUser->id();
    $return['currentUser']['roles'] = $currentUser->getRoles();
    //reviseduser 
    $return['reviseduser']['id'] = $reviseduser->id();
    $return['reviseduser']['roles'] = $reviseduser->getRoles();
  }
  return $return;
}