{#
/**
 * @file
 * Taxonomy links layout. This is used for a block with the "Bookmarks" category and is
 * not in the block layout; instead it is rendered into a variable by the usa_twig_vars_preprocess
 * function so that bookmarks can be used to generate Taxonomy information for the HTML head
 * of a page.
 */
#}
{% set nodeID = node.nid[0].value %}
{% set path = drupal_url('node/'~nodeID) %}
{% set links = content['#links'] %}
{# Since six entries are wanted, we'll probably need a "for i in 0..5" loop #}
{# see https://twig.symfony.com/doc/3.x/tags/for.html #}
{# Code is not indented to keep proper formatting when viewing page source for datalayer #}

{% set v = 5 %}
{% set x = "" %}
{% set counter = 0 %}
{% for link in links %}
{% set counter = counter + 1 %}
{% set x = v - loop.length %}
      "Taxonomy_Text_{{ counter }}": "{{ link.getText() }}",
{% endfor %}
{% for link in 0..x %}
{% for link in links %}
{% if loop.last %}
{% set counter = counter + 1 %}
      "Taxonomy_Text_{{ counter }}": "{{ link.getText() }}",
{% endif %}
{% endfor %}
{% endfor %}
{% set counter = 0 %}
{% for link in links %}
{% set counter = counter + 1 %}
{% if loop.last %}
      "Taxonomy_URL_{{ counter }}": "{{ path }}",
{% else %}
      "Taxonomy_URL_{{ counter }}": "{{ link.getUrl() }}",
{% endif %}
{% endfor %}
{% for i in 0..x %}
{% for link in links %}
{% if loop.last %}
{% set counter = counter + 1 %}
      "Taxonomy_URL_{{ counter }}": "{{ path }}",
{% endif %}
{% endfor %}
{% endfor %}