{#
/**
 * @file
 * Default theme implementation to display a list of summary lines.
 *
 * Available variables:
 * - rows: The rows contained in this view.
 *   Each row contains:
 *   - url: The summary link URL.
 *   - link: The summary link text.
 *   - count: The number of items under this grouping.
 *   - attributes: HTML attributes to apply to each row.
 *   - active: A flag indicating whether the row is active.
 * - options: Flags indicating how the summary should be displayed.
 *   This contains:
 *    - count: A flag indicating whether the count should be displayed.
 *
 * @see template_preprocess_views_view_summary()
 *
 * @ingroup themeable
*/
#}

{% set is_directory = view.element['#name'] == 'federal_agencies' %}
{% if is_directory %}
<div class="usagov-directory-page-container">
  <p class="usa-intro">
    Find contact information for U.S. federal government departments and agencies including websites, 
    emails, phone numbers, addresses, and more.
    <a href="https://www.usa.gov/states-and-territories">
      Get contact information for each state and territory.
    </a>
  </p>
{% endif %}
  
<div {{is_directory ? ' class="usagov-directory-container"' }}>
  <ul class="usagov-directory-container-az">
    {% for row in rows %}
        <li><a href="{{ row.url }}"{{ row.attributes.addClass(row.active ? 'is-active')|without('href') }}>{{ row.link }}</a>
        {% if options.count %}
          ({{ row.count }})
        {% endif %}
      </li>
    {% endfor %}
  </ul>
  <div><hr class="bl-divider"></div>
  <!-- Search Bar -->
  <div class="usagov-directory-search-container">
    <p>OR</p>
    {# TODO: add remaining search bar component #}
    <section aria-label="Small search component">
        <form class="fed-directory-search-bar" role="search">
          <input
              class="usa-input fed-directory-search-input"
              id="search-field-en-small"
              type="search"
              placeholder="Search for a Federal Agency"
              onfocus="this.placeholder"
              autocomplete="off"
          />
          <button class="usa-button fed-directory-search-btn" type="submit">
              {# TODO: insert custom? USWDS search icon when available #}
              {# <svg alt="Search" class="usa-icon" aria-hidden="true" focusable="false" role="img">
                <use xlink:href="/assets/img/sprite.svg#search"></use> #}
              </svg>
          </button>
        </form>
    </section>
  </div>
</div>

{% if is_directory %}
{# TODO: insert letter dynamically here #}
<h2 class="usagov-directory-letter-heading">A</h2>
{# TODO: accordion placeholder #}
{# <div class="usa-accordion usagov-directory-accordion-container">
  {% for key, obj in content["field_placeholder"] %}
    {% if key matches '/^\\d+$/' %}
        <h2 class="usa-accordion__heading">
        <!-- TODO: MUST USE UID for aria-controls -->
        <button
          aria-controls="a1"
          aria-expanded="false"
          class="usa-accordion__button"
          >
            {{content["field_placeholder"]}}
          </button>
        </h2>

        <div class="usa-accordion__content usa-prose" id="a1">
          <p>{{content["field_placeholder"]}}</p>

          <p>&nbsp;</p>

          <div>
            <p>Website:&nbsp;</p>

            <p><a>{{content["field_placeholder"]}}</a></p>
          </div>

          <div>
            <p>Phone Number:&nbsp;</p>

            <p>{{content["field_placeholder"]}}</p>
          </div>

          <div>
            <p>Contact:&nbsp;</p>

            <p><a>{{content["field_placeholder"]}}</a></p>
          </div>

          <!-- TODO: Not all will have this section, hide or show depending on if available -->
          <p class="h-bold">Find an Office Near You:</p>

          <ul>
            <li><a>{{content["field_placeholder"]}}</a></li>
          </ul>

          <p class="h-bold">
            <a>{{content["field_placeholder"]}}</a>
          </p>
        </div>
    {% endif %}
  {% endfor %}
</div> #}
</div>
{% endif %}
